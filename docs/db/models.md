
# models.py

Этот модуль содержит определения классов SQLAlchemy ORM для работы с таблицами базы данных. Классы отражают сущности, связанные с пользователями, авторами, книгами и выдачей книг.

## Классы

### 1. `User` - класс для таблицы `user_table`
Описание таблицы для пользователей.

#### Атрибуты:
- **id** (`Integer`): Уникальный идентификатор пользователя (первичный ключ).
- **first_name** (`String(100)`): Имя пользователя.
- **second_name** (`String(100)`): Фамилия пользователя.
- **birth_date** (`Date`): Дата рождения пользователя.
- **username** (`String(16)`): Логин пользователя (не может быть пустым).
- **password** (`String(64)`): Хешированный пароль пользователя.
- **is_admin** (`Boolean`): Указывает, является ли пользователь администратором (по умолчанию `False`).

#### Методы:
- **get_age()**: Возвращает возраст пользователя на текущий момент.
- **get_fullname()**: Возвращает полное имя пользователя (формат: "Имя Фамилия").

#### Пример инициализации:
```python
user = User(first_name="Иван", second_name="Иванов", birth_date="1990-01-01", username="ivan_90", password="hashed_password")
 ```

### 2. `Author` - класс для таблицы `author_table`

Описание таблицы для авторов.

#### Атрибуты:

-   **id** (`Integer`): Уникальный идентификатор автора (первичный ключ).
-   **name** (`String(100)`): Имя автора.
-   **bio** (`String(1000)`): Биография автора.
-   **birth_date** (`Date`): Дата рождения автора.
-   **author_hash** (`String(32)`): Уникальный хеш автора, вычисляемый на основе имени и даты рождения.

#### Методы:

-   **get_age()**: Возвращает возраст автора на текущий момент.

#### Пример инициализации:
```python
author = Author(name="Лев Толстой", bio="Русский писатель", birth_date="1828-09-09")
 ```

### 3. `Book` - класс для таблицы `book_table`

Описание таблицы для книг.

#### Атрибуты:

-   **id** (`Integer`): Уникальный идентификатор книги (первичный ключ).
-   **name** (`String(64)`): Название книги.
-   **description** (`String(1000)`): Описание книги.
-   **publication_date** (`Date`): Дата публикации книги.
-   **author_id** (`Integer`): Идентификатор автора (внешний ключ к таблице `author_table`).
-   **genre** (`String(32)`): Жанр книги.
-   **quantity** (`Integer`): Количество копий книги в библиотеке.
-   **book_hash** (`String(32)`): Уникальный хеш книги, вычисляемый на основе названия и даты публикации.

#### Пример инициализации:
```python
book = Book(name="Война и мир", description="Роман Льва Толстого", publication_date="1869-01-01", author_id=1, genre="Роман", quantity=10)
 ```

### 4. `Rent` - класс для таблицы `rent_table`

Описание таблицы для выдачи книг.

#### Атрибуты:

-   **rent_id** (`Integer`): Уникальный идентификатор выдачи (первичный ключ).
-   **reader_id** (`Integer`): Идентификатор пользователя, получающего книгу (внешний ключ к таблице `user_table`).
-   **book_id** (`Integer`): Идентификатор выдаваемой книги (внешний ключ к таблице `book_table`).
-   **issue_date** (`Date`): Дата выдачи книги.
-   **return_date** (`Date`): Дата возврата книги.

#### Исключения:

-   **BooksLimitExceed**: Исключение, которое возникает, если пользователь превышает лимит на количество выданных книг.

#### Методы:

-   **__checkBooksLimit(reader_id: int)**: Проверяет, превышает ли пользователь лимит на количество выданных книг. Если лимит превышен, вызывается исключение `BooksLimitExceed`.

#### Пример инициализации:
```python
rent = Rent(reader_id=1, book_id=1, return_date="2025-02-15")
 ```

### Примечания:

-   В модели `Rent` используется механизм проверки лимита арендованных книг с помощью настройки `BOOKS_LIMIT_FOR_READER`, заданной в конфигурации.
-   В классе `Author` и `Book` используются хеши (`author_hash`, `book_hash`), которые обеспечивают уникальность записей для авторов и книг с одинаковыми названиями и датами
